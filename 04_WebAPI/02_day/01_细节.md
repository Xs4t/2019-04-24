# 一些细节

## 关于排他思想的两种实现方式

```javascript
// 第一种：也是上课提到的，先干掉其他的，再操作自己的
var aBtns = document.querySelectorAll('button');
for (var i = 0; i < aBtns.length; i++) {
    aBtns[i].onclick = function () {
        // step1: 先干掉其他的
        for (var i = 0; i < aBtns.length; i++) {
            aBtns[i].style.backgroundColor = '';
        }
        // step2: 再操作自己的
        this.style.backgroundColor = 'pink';
    };
}
```

```javascript
// 第二种
var aBtns = document.querySelectorAll('button');
var iNum = 0;
for (var i = 0; i < aBtns.length; i++) {
    aBtns[i].index = i;
    aBtns[i].onclick = function () {
        // step1: 先干掉第 0 个
        aBtns[iNum].style.backgroundColor = '';
        // step2: 再操作自己的
        this.style.backgroundColor = 'pink';
        // step3: 操作完后把操作的那个索引赋值给 iNum
        iNum = this.index;
    };
}
```

## 关于设置自定义属性

```javascript
// 首先，我们严重推荐下面的使用方法
// step1: 使用 setAttribute 设置
oDiv.setAttribute('say', 'hello world');
// step2: 使用 getAttribute 获取
oDiv.getAttribute('say);
```

```javascript
// 如果使用这种方式添加自定义属性，打开浏览器在控制台是看不到的
oDiv.say = 'hello';
// 但是可以通过下面的方式得到值
console.log(oDiv.say);
```

## 关于全选/反选

第一种方式，也是我们课上所讲到的

```javascript
var oAll = document.querySelector('.all');
var aItem = document.querySelectorAll('.item');

// 全选/反选，我相信这里大家都没有问题
oAll.onclick = function() {
    var isChecked = this.checked;
    for(var i = 0; i < aItem.length; i ++) {
        aItem[i].checked = isChecked;
    }
};

for(var i = 0; i < aItem.length; i ++) {
    aItem[i].onclick = function() {
        var flag = true;
        for(var i = 0; i < aItem.length; i ++) {
            // 如果发现有一个没选中的，那就把 flag 置为 false，目的是赋值个全选按钮，全选的按钮为 false 也就会变为没选中，这也正是我们所需要的
            if(!aItem[i].checked) {
                flag = false;
                // 注意这里最好加一个 break，因为一旦有一个没选中的也就可以确定我们的全选按钮不需要打钩了
                // 当然你不加 break 逻辑上也没有什么问题，性能上存在浪费罢了
                break;
            }
        }
        // 注意这里的处理逻辑一定是放在上面 for 的外面
        oAll.checked = flag;
    };
}
```

下面代码是第二种方式，其实和第一种大同小异，只是有个细节需要注意下，注意看下面的注释

```javascript
for (var i = 0; i < aItem.length; i++) {
    aItem[i].onclick = function () {
        for (var i = 0; i < aItem.length; i++) {
            if (!aItem[i].checked) {
                // 如果发现有一个没选中的，那就直接把全选按钮置为 false
                oAll.checked = false;
                // 并且一定要进行 break！！！假如不进行 break，试想下第一次点击最后一个单选按钮会发生怎样的情况？
                break;
            } else {
                // 如果第一次点击第一个按钮，那就是 aItem[i].checked 为 true，!aItem[i].checked则是 false，所以就会走这里的代码
                // 也就是 oAll 确实会有一个瞬间选中的过程（不信可以在这里打个断点试试），紧接着又开始了下次循环，走到 if 里面又瞬间置为了 false
                oAll.checked = true;
            }
        }
    };
}
```

## 关于 this

